<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <link rel="stylesheet" href="../../css/dash.css">
    <link rel="shortcut icon" href="../../img/logo-login.png" type="image/x-icon">
    <script src="sweetalert2.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/intro.js/minified/introjs.min.css">
    <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>
    <link rel="stylesheet" href="sweetalert2.min.css">
    <script defer src="../../js/dash.js"></script>
    <script defer src="../../funcoes.js"></script>
    <script defer src="../../js/js.js"></script>
    <script src="sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <title>KCODE</title>
</head>

<body onload="verificar_autenticacao()">
    <main class="page">
        <div class="menu">
            <div class="container">
                <div class="navigation">
                    <ul>
                        <li>
                            <a href="dashboard.html">
                                <span class="icon">
                                    <i class="fa fa-home" aria-hidden="true"></i>
                                </span>
                                <span class="title">Home</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span class="icon">
                                    <i class="fa fa-user" aria-hidden="true" style="color: cadetblue;"></i>
                                </span>
                                <span class="title">Perfil</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="funciona()">
                                <span class="icon">
                                    <i class="fa fa-question-circle" aria-hidden="true"></i>
                                </span>
                                <span class="title">Tutorial</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="darkMode()">
                                <span class="icon">
                                    <i class="fa fa-cog" aria-hidden="true">
                                    </i>
                                </span>
                                <span class="title">Settings</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="logoff()">
                                <span class="icon">
                                    <i class="fa fa-sign-out" aria-hidden="true"></i>
                                </span>
                                <span class="title">Sign Out</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="toggle"></div>
            </div>
        </div>
        <!-- menu end-->
        <header>
            <div class="box-recepction">
                <div class="recection-welcome">
                    <h1>Escolha as IDES que deseja visualizar: </h1>

                    <!-- <p>Escolha as IDES que deseja visualizar:</p> -->
                </div>
                <div class="logo-recepction">
                    <img src="../../img/logo-maior.png" alt="" id="logo-kcode">

                </div>
            </div>
        </header>
      

        <div class="ides-container">
            <div class="container-info">

                <div class="info-time">
                    <div class="container-titulo">
                        <h1>Perfil</h1>
                    </div>


                    <div class="container-label">
                        <p id="b_usuario1">Nome: </p>
                        <p id="cargo">Cargo: </p>
                        <p id="empresa">Empresa: </p>
                    </div>


                </div>

                <div class="legenda-3">

                    <div class="box-ram">
                        <div class="uso-container"></div>
                        <p></p>
                    </div>

                    <div class="box-ram">
                        <div class="uso-container"></div>
                        <p></p>
                    </div>

                </div>

            </div>
            <div class="separation-ides">
                <div class="box-ides">
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideXcode" name="xcode" value="1"
                            onclick="verifyCheckbox(ideXcode)">
                        <img src="../../img/xcode.png" alt="" id="xcode" onclick="checar(ideXcode)" class="logo-ide">
                        <b class="ide">XCode</b>
                    </div>
                    <div class="idesLogo">
                        <input id="idePyCharm" type="checkbox" class="check" name="pycharm" value="2"
                            onclick="verifyCheckbox(idePyCharm)">
                        <img src="../../img/pycharm64.png" alt="" id="android" onclick="checar(idePyCharm)"
                            class="logo-ide">
                        <b id="ide">PyCharm</b>
                    </div>
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideVsCode" name="vscode" value="3"
                            onclick="verifyCheckbox(ideVsCode)">
                        <img src="../../img/code.png" alt="" id="netbeans" onclick="checar(ideVsCode)" class="logo-ide">
                        <b id="ide">Visual Studio Code</b>
                    </div>
                </div>

                <div class="box-ides">
                    <div class="idesLogo">
                        <input id="ideNetbeans" type="checkbox" class="check" name="netbeans" value="4"
                            onclick="verifyCheckbox(ideNetbeans)">
                        <img src="../../img/netbeans64.png" alt="" id="netbeans" onclick="checar(ideNetbeans)"
                            class="logo-ide">
                        <b id="ide">Netbeans</b>
                    </div>
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideIntellij" name="intellj" value="5"
                            onclick="verifyCheckbox(ideIntellij)">
                        <img src="../../img/idea64.png" alt="" id="intellj" onclick="checar(ideIntellij)"
                            class="logo-ide">
                        <b id="ide">Intellij</b>
                    </div>
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideAndroid" name="androidstudio" value="6"
                            onclick="verifyCheckbox(ideAndroid)">
                        <img src="../../img/studio64.png" alt="" id="netbeans" onclick="checar(ideAndroid)"
                            class="logo-ide">
                        <b id="ide">Android Studio</b>
                    </div>
                </div>
                <div class="footer-salvar">
                    <div class="salvar">
                        <input type="submit" value="Salvar" id="salvarbtn" onclick="Salvar()"/>
                    </div>
                </div>
            </div>
            <div class="btn" id="next">
                <i class="fa fa-chevron-right" aria-hidden="true" style="visibility: visible;"></i>
            </div>
        </div>

        <div class="ides-container-part2">
            <div class="container-info">

                <div class="info-time">
                    <div class="container-titulo">
                        <h1>Perfil</h1>
                    </div>


                    <div class="container-label">
                        <p id="b_usuario2">Nome: </p>
                        <p id="cargo2">Cargo: </p>
                        <p id="empresa2">Empresa: </p>
                    </div>


                </div>

                <div class="legenda-3">

                    <div class="box-ram">
                        <div class="uso-container"></div>
                        <p></p>
                    </div>

                    <div class="box-ram">
                        <div class="uso-container"></div>
                        <p></p>
                    </div>

                </div>

            </div>
            <div class="separation-ides">
                <div class="box-ides">
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="idePhpStorm" name="phpstorm" value="7"
                            onclick="verifyCheckbox(idePhpStorm)">
                        <img src="../../img/phpstorm64.png" alt="" id="phpstorm" onclick="checar(idePhpStorm)"
                            class="logo-ide">
                        <b id="ide">PhpStorm</b>
                    </div>
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideWebStorm" name="webstorm" value="8"
                            onclick="verifyCheckbox(ideWebStorm)">
                        <img src="../../img/webstorm64.png" alt="" id="webstorm" onclick="checar(ideWebStorm)"
                            class="logo-ide">
                        <b id="ide">WebStorm</b>
                    </div>
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideEclipse" name="eclipse" value="9"
                            onclick="verifyCheckbox(ideEclipse)">
                        <img src="../../img/eclipse.png" alt="" id="eclipse" onclick="checar(ideEclipse)"
                            class="logo-ide">
                        <b id="ide">Eclipse</b>
                    </div>
                </div>

                <div class="box-ides">
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideVisualStudio" name="visualstudio" value="10"
                            onclick="verifyCheckbox(ideVisualStudio)">
                        <img src="../../img/devenv.png" alt="" id="visualstudio" onclick="checar(ideVisualStudio)"
                            class="logo-ide">
                        <b id="ide">Visual Studio</b>
                    </div>
                    <div class="idesLogo">
                        <input type="checkbox" class="check" id="ideSublime" name="sublime" value="11">
                        <img src="../../img/sublime.png" alt="" id="sublime" onclick="checar(ideSublime)"
                            class="logo-ide">
                        <b id="ide">SublimeText</b>
                    </div>
                    <div class="idesLogo">
                    </div>
                </div>
                <div class="footer-salvar">
                    <div class="salvar">
                        <input type="submit" value="Salvar" onclick="Salvar()"/>
                    </div>
                </div>
            </div>
            <div class="btn" id="back">
                <i class="fa fa-chevron-left" aria-hidden="true" style="visibility: visible;"></i>
            </div>
        </div>

        <script id="ze-snippet"
        src="https://static.zdassets.com/ekr/snippet.js?key=237e22c7-2a08-4226-a7ca-28087f16f818"> </script>
    </main>
</body>

</html>

<script>

    let recuperaIDE = [];
    let valuesIDE = [];
    let apagarIDE = [];
    let diferencaValue = [];

    function checar(idDiv) {
        if (idDiv.checked) {
            var index = valuesIDE.indexOf(idDiv.value);
            valuesIDE.splice(index, 1)
            recuperaIDE.splice(index, 1)
            apagarIDE.push(idDiv.value)
            idDiv.checked = false
            console.log("imagem desmarca", valuesIDE, apagarIDE)
        } else {
            var index = valuesIDE.indexOf(idDiv.value);
            for (let i = 0; i < apagarIDE.length; i++) {
                const element = apagarIDE[i];
                if (element == index) {
                    apagarIDE.splice(index, 1)
                }
            }
            valuesIDE.push(idDiv.value)
            idDiv.checked = true;
            console.log("imagem marca", valuesIDE, apagarIDE)
        }
    }

    function verifyCheckbox(idDiv) {
        if (!idDiv.checked) {
            var index = valuesIDE.indexOf(idDiv.value);
            valuesIDE.splice(index, 1)
            recuperaIDE.splice(index, 1)
            apagarIDE.push(idDiv.value)
            console.log("box desmarca", valuesIDE, apagarIDE)
        } else {
            var index = valuesIDE.indexOf(idDiv.value);
            for (let i = 0; i < apagarIDE.length; i++) {
                const element = apagarIDE[i];
                if (element == index) {
                    apagarIDE.splice(index, 1)
                }
            }
            valuesIDE.push(idDiv.value)
            console.log("box marca", valuesIDE, apagarIDE)
        }
    }

    function recuperarIDE() {
        var idFuncionario = sessionStorage.id_usuario_meuapp;
        console.log("Entrei no recuperar IDE")
        fetch(`/ides/recuperarIDEs/${idFuncionario}`, { method: "POST" })
            .then(resposta => {
                if (resposta.ok) {

                    resposta.json().then(json => {
                        for (let u = 0; u < json.length; u++) {
                            console.log("resultado: ", json[u].tb_ide_maquina_id_ide)
                            recuperaIDE.push(json[u].tb_ide_maquina_id_ide);
                            valuesIDE.push(json[u].tb_ide_maquina_id_ide);
                        }
                        console.log(JSON.stringify(json))
                        verificarCheckBox()
                    });

                } else {
                    console.log('Erro ao recuperar IDE');
                }
            });
    }

    function verificarCheckBox() {
        var inputs = document.querySelectorAll('.check')
        for (var i = 0; i < inputs.length; i++) {
            let valores = inputs[i].getAttribute('value');
            for (let index = 0; index < recuperaIDE.length; index++) {
                const element = recuperaIDE[index];
                if (element === valores) {
                    inputs[valores - 1].checked = true
                }
            }
        }
    }

    function validarDiferenca() {
        valuesIDE.forEach(function (element, index, array) {
            if (recuperaIDE.indexOf(element) == -1)
                diferencaValue.push(element);
        });
    }

    function funciona() {
        introJs().setOptions({
            showBullets: false,
            showProgress: true,
            steps: [{
                title: 'Bem vindo ao nosso tutorial',
                intro: 'Aqui você pode ver o passo a passo de como a dashboard funciona 😊',
                tooltipClass: 'customTooltip'
            },
            {
                element: document.querySelector('.info-time'),
                intro: 'Aqui você pode ver suas informações pessoais',
                tooltipClass: 'customTooltip'
            },

            {
                element: document.querySelector('.btn'),
                intro: 'Ao clicar na flecha você pode ver mais opções de ambientes de desenvolvimento que podem ser selecionados',
                tooltipClass: 'customTooltip'
            },

            {
                element: document.querySelector('.idesLogo'),
                intro: 'Aqui você pode selecionar os ambientes de desenvolvimento que gostaria de visualizar na sua dashboard',
                tooltipClass: 'customTooltip'
            },

            
            {
                element: document.querySelector('#salvarbtn'),
                intro: 'Ao clicar no botão, você salva suas preferências de ambiente de desenvolvimento',
                tooltipClass: 'customTooltip'
            }
            

            ]
        }).start();
    }


    
</script>